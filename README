zfs-auto-snapshot:

An alternative implementation of the zfs-auto-snapshot service for Linux
that is compatible with zfs-linux and zfs-fuse.

Automatically create, rotate, and destroy periodic ZFS snapshots. This is
the utility that creates the @zfs-auto-snap_frequent, @zfs-auto-snap_hourly,
@zfs-auto-snap_daily, @zfs-auto-snap_weekly, and @zfs-auto-snap_monthly
snapshots if it is installed.

This program is a posixly correct bourne shell script.  It depends only on
the zfs utilities and cron, and can run in the dash shell.

Local changes from zfsonlinux/zfs-auto-snapshot:

* Require our ZFS packages in debian/control
* add --default-exclude flag to cron.(daily|hourly|weekly) jobs


Installation:
-------------

git clone git@github.com:kentik/zfs-auto-snapshot.git
git checkout -b local-changes
dpkg-buildpackage -b -uc -us
sudo dpkg -i ../zfs-auto-snapshot_*.deb


As configured here, only the zfs-auto-snapshot-frequent cron job will
make snapshots (other datasets will be excluded), this runs every 15
minutes, and 4 are maintained.

To enable (e.g.) hourly/daily snaps on <dataset>, do:

sudo zfs set com.sun:auto-snapshot=true <dataset>
sudo zfs set com.sun:auto-snapshot:hourly=true <dataset>
sudo zfs set com.sun:auto-snapshot:daily=true <dataset>

